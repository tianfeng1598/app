<html>
  <script type="text/javascript">
    const ipc = require('electron').ipcRenderer
    const BrowserWindow = require('electron').remote.BrowserWindow

    ipc.on('compute-factorial', function (event, number, fromWindowId) {
      const result = factorial(number)
      const fromWindow = BrowserWindow.fromId(fromWindowId)
      // 只能通过 ipcMain 的方式去发送，无法通过 ipcRenderer 通信
      fromWindow.webContents.send('factorial-computed', number, result)
      // 无法通过 ipcRenderer 通信
      // ipc.send('factorial-computed', number, result);
      window.close()
    })

    function factorial (num) {
      if (num === 0) return 1
      return num * factorial(num - 1)
    }
  </script>
</html>
